const fs = require("fs-extra");
const axios = require("axios");
const request = require("request");

module.exports.config = {
Â  name: "rules",
Â  version: "1.0.0",
Â  hasPermssion: 0,
Â  credits: "ð˜ð€ðŠð”ð â˜¢ï¸_ð–£˜ -ððŽð“ âš ï¸ _ â˜¢ï¸",
Â  description: "Automatically sends group rules every 2 hours",
Â  commandCategory: "system",
Â  cooldowns: 5,
};

const rulesText = (groupName) => `ðŸŒºâ•”â•â•â–â€¢ðŸ’  **${groupName || "ð’ð’ð‚ ðŸðŠðŸðŸ“â¸™ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹â­•"} ð†ð‘ðŽð”ð ð‘ð”ð‹ð„ð’ ðŸ’ â€¢â–â•â•â•—ðŸŒº

ðŸ“Œ à¦¸à¦¬à¦¾à¦° à¦œà¦¨à§à¦¯ à¦•à¦¿à¦›à§ à¦—à§à¦°à§à¦¤à§à¦¬à¦ªà§‚à¦°à§à¦£ à¦¨à¦¿à¦¯à¦¼à¦® â€” à¦…à¦¨à§à¦—à§à¦°à¦¹ à¦•à¦°à§‡ à¦¸à¦¬à¦¾à¦‡ à¦®à§‡à¦¨à§‡ à¦šà¦²à¦¬à§‡ ðŸ™

ðŸ’Žâœ¨ ðŸ. ð‘¹ð’†ð’”ð’‘ð’†ð’„ð’• ð‘¬ð’—ð’†ð’“ð’šð’ð’ð’† âœ¨ðŸ’Ž
> à¦¸à¦¬à¦¾à¦° à¦¸à¦¾à¦¥à§‡ à¦­à¦¦à§à¦°à¦­à¦¾à¦¬à§‡ à¦†à¦šà¦°à¦£ à¦•à¦°à§‹ ðŸ’¬
à¦•à¦¾à¦°à¦“ à¦¸à¦¾à¦¥à§‡ à¦à¦—à¦¡à¦¼à¦¾ à¦¬à¦¾ à¦–à¦¾à¦°à¦¾à¦ª à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° âŒ

ðŸ’¥âœ¨ ðŸ. ð‘µð’ ð‘ºð’‘ð’‚ð’Ž / ð‘­ð’ð’ð’ð’… âœ¨ðŸ’¥
> à¦à¦•à¦¸à¦¾à¦¥à§‡ à¦…à¦¨à§‡à¦• à¦®à§‡à¦¸à§‡à¦œ à¦ªà¦¾à¦ à¦¾à¦¨à§‹ à¦¬à¦¾ à¦Ÿà§à¦¯à¦¾à¦— à¦¸à§à¦ªà§à¦¯à¦¾à¦® à¦•à¦°à¦¾ à¦¨à¦¿à¦·à§‡à¦§ ðŸš«

ðŸ”—âœ¨ ðŸ‘. ð‘µð’ ð‘·ð’“ð’ð’Žð’ð’•ð’Šð’ð’ âœ¨ðŸ”—
> à¦¨à¦¿à¦œà§‡à¦° à¦ªà§‡à¦œ/à¦—à§à¦°à§à¦ª/à¦šà§à¦¯à¦¾à¦¨à§‡à¦² à¦²à¦¿à¦‚à¦• à¦ªà§‹à¦¸à§à¦Ÿ à¦•à¦°à¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾ ðŸ“µ
à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨ à¦ªà¦¾à¦°à¦®à¦¿à¦¶à¦¨ à¦›à¦¾à§œà¦¾ à¦²à¦¿à¦‚à¦• à¦¶à§‡à§Ÿà¦¾à¦° âŒ

ðŸ’¢âœ¨ ðŸ’. ð‘µð’ ðŸðŸ–+ / ð‘­ð’‚ð’Œð’† ð‘ªð’ð’ð’•ð’†ð’ð’• âœ¨ðŸ’¢
> à¦•à§‹à¦¨à§‹ à¦…à¦¶à§à¦²à§€à¦² à¦›à¦¬à¦¿, à¦­à¦¿à¦¡à¦¿à¦“, à¦­à§Ÿà§‡à¦¸ à¦¶à§‡à§Ÿà¦¾à¦° à¦•à¦°à¦²à§‡ à¦¬à§à¦¯à¦¾à¦¨ ðŸ˜¤
à¦­à§à¦¯à¦¼à¦¾ à¦†à¦‡à¦¡à¦¿ à¦¬à¦¾ à¦«à§‡à¦• à¦¨à¦¾à¦® âŒ

ðŸ•Œâœ¨ ðŸ“. ð‘¹ð’†ð’”ð’‘ð’†ð’„ð’• ð‘¹ð’†ð’ð’Šð’ˆð’Šð’ð’ âœ¨ðŸ•Œ
> à¦§à¦°à§à¦® à¦¨à¦¿à¦¯à¦¼à§‡ à¦®à¦œà¦¾, à¦•à¦Ÿà§‚à¦•à§à¦¤à¦¿ à¦¬à¦¾ à¦¬à¦¿à¦¤à¦°à§à¦• à¦•à¦ à§‹à¦°à¦­à¦¾à¦¬à§‡ à¦¨à¦¿à¦·à¦¿à¦¦à§à¦§ ðŸš«

ðŸ’¬âœ¨ ðŸ”. ð‘¼ð’”ð’† ð‘·ð’ð’ð’Šð’•ð’† ð‘³ð’‚ð’ð’ˆð’–ð’‚ð’ˆð’† âœ¨ðŸ’¬
> à¦•à¦¾à¦°à¦“ à¦®à¦¨à§‡ à¦†à¦˜à¦¾à¦¤ à¦¦à§‡à¦¯à¦¼ à¦à¦®à¦¨ à¦•à¦¥à¦¾ à¦¬à¦²à§‹ à¦¨à¦¾ â¤ï¸

ðŸ‘‘âœ¨ ðŸ•. ð‘­ð’ð’ð’ð’ð’˜ ð‘¨ð’…ð’Žð’Šð’ & ð‘´ð’ð’…ð’” âœ¨ðŸ‘‘
> à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨à§‡à¦° à¦¸à¦¿à¦¦à§à¦§à¦¾à¦¨à§à¦¤à¦‡ à¦šà§‚à¦¡à¦¼à¦¾à¦¨à§à¦¤ âš–ï¸
à¦°à§à¦² à¦­à¦¾à¦™à¦²à§‡ âš ï¸ Warning à¦¬à¦¾ ðŸš« Remove à¦•à¦°à¦¾ à¦¹à¦¬à§‡

ðŸ“šâœ¨ ðŸ–. ð‘ºð’•ð’‚ð’š ð‘¶ð’ ð‘»ð’ð’‘ð’Šð’„ âœ¨ðŸ“š
> à¦—à§à¦°à§à¦ªà§‡à¦° à¦‰à¦¦à§à¦¦à§‡à¦¶à§à¦¯ à¦…à¦¨à§à¦¯à¦¾à¦¯à¦¼à§€ à¦šà§à¦¯à¦¾à¦Ÿ à¦•à¦°à§‹ ðŸ’¡
à¦…à¦«à¦Ÿà¦ªà¦¿à¦• à¦¬à¦¾ à¦…à¦¯à¦¥à¦¾ à¦†à¦²à§‹à¦šà¦¨à¦¾ à¦•à¦®à¦¾à¦“ ðŸ’¤

ðŸ“©âœ¨ ðŸ—. ð‘¹ð’†ð’‘ð’ð’“ð’• ð‘·ð’“ð’Šð’—ð’‚ð’•ð’†ð’ð’š âœ¨ðŸ“©
> à¦•à§‹à¦¨à§‹ à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¹à¦²à§‡ à¦ªà¦¾à¦¬à¦²à¦¿à¦•à§‡ à¦¨à¦¾ à¦¬à¦²à§‡, à¦…à§à¦¯à¦¾à¦¡à¦®à¦¿à¦¨à¦•à§‡ à¦‡à¦¨à¦¬à¦•à§à¦¸à§‡ à¦œà¦¾à¦¨à¦¾à¦“ ðŸ™

ðŸŒºâ•šâ•â•â–â€¢ðŸ’  ð‘©ð’† ð‘¹ð’†ð’”ð’‘ð’†ð’„ð’•ð’‡ð’–ð’, ð‘©ð’† ð‘­ð’“ð’Šð’†ð’ð’…ð’ð’š ðŸ’ â€¢â–â•â•â•ðŸŒº

ðŸŒ¸ ð†ð«ð¨ð®ð© ððšð¦ðž: ${groupName || "ð’ð’ð‚ ðŸðŠðŸðŸ“â¸™ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹ê ‹â­•"}
ðŸ‘‘ ð€ðð¦ð¢ð§: ð˜ð€ðŠð”ð ð‡ðŽð’ð’ð„ð ðŸ”—
https://www.facebook.com/yakub.hossen.548359

ðŸ’– Stay humble, stay respectful â€” together we are family! ðŸ’–`;

module.exports.onLoad = async ({ api }) => {
Â  const imageLink = "https://i.postimg.cc/PJKFqGkP/IMG-20240823-182020-699.jpg"; // à¦¸à§à¦¨à§à¦¦à¦° à¦¬à§à¦¯à¦¾à¦•à¦—à§à¦°à¦¾à¦‰à¦¨à§à¦¡ à¦‡à¦®à§‡à¦œ à¦†à¦®à¦¿ à¦¬à§‡à¦›à§‡ à¦¦à¦¿à§Ÿà§‡à¦›à¦¿ ðŸ’ 
Â  
Â  setInterval(async () => {
Â Â Â  const threads = global.data.allThreadID || [];
Â Â Â  for (const threadID of threads) {
Â Â Â Â Â  try {
Â Â Â Â Â Â Â  const threadInfo = await api.getThreadInfo(threadID);
Â Â Â Â Â Â Â  const groupName = threadInfo.threadName || "Unknown Group";

Â Â Â Â Â Â Â  const imgPath = __dirname + "/cache/rulesbanner.jpg";
Â Â Â Â Â Â Â  await new Promise((resolve, reject) => {
Â Â Â Â Â Â Â Â Â  request(encodeURI(imageLink))
Â Â Â Â Â Â Â Â Â Â Â  .pipe(fs.createWriteStream(imgPath))
Â Â Â Â Â Â Â Â Â Â Â  .on("close", resolve)
Â Â Â Â Â Â Â Â Â Â Â  .on("error", reject);
Â Â Â Â Â Â Â  });

Â Â Â Â Â Â Â  api.sendMessage(
Â Â Â Â Â Â Â Â Â  {
Â Â Â Â Â Â Â Â Â Â Â  body: rulesText(groupName),
Â Â Â Â Â Â Â Â Â Â Â  attachment: fs.createReadStream(imgPath),
Â Â Â Â Â Â Â Â Â  },
Â Â Â Â Â Â Â Â Â  threadID,
Â Â Â Â Â Â Â Â Â  () => fs.unlinkSync(imgPath)
Â Â Â Â Â Â Â  );
Â Â Â Â Â  } catch (err) {
Â Â Â Â Â Â Â  console.log(`[rules.js] Error sending rules in ${threadID}:`, err.message);
Â Â Â Â Â  }
Â Â Â  }
Â  }, 2 * 60 * 60 * 1000); // à¦ªà§à¦°à¦¤à¦¿ à§¨ à¦˜à¦¨à§à¦Ÿà¦¾ à¦ªà¦° à¦ªà¦°
};

module.exports.run = async ({ api, event }) => {
Â  const threadInfo = await api.getThreadInfo(event.threadID);
Â  const groupName = threadInfo.threadName || "Unknown Group";
Â  const imgPath = __dirname + "/cache/rules.jpg";
Â  const imageLink = "https://i.postimg.cc/PJKFqGkP/IMG-20240823-182020-699.jpg";

Â  request(encodeURI(imageLink))
Â Â Â  .pipe(fs.createWriteStream(imgPath))
Â Â Â  .on("close", () =>
Â Â Â Â Â  api.sendMessage(
Â Â Â Â Â Â Â  {
Â Â Â Â Â Â Â Â Â  body: rulesText(groupName),
Â Â Â Â Â Â Â Â Â  attachment: fs.createReadStream(imgPath),
Â Â Â Â Â Â Â  },
Â Â Â Â Â Â Â  event.threadID,
Â Â Â Â Â Â Â  () => fs.unlinkSync(imgPath)
Â Â Â Â Â  )
Â Â Â  );
};

  
